(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{299:function(e,a,t){},300:function(e,a,t){},399:function(e,a,t){},400:function(e,a,t){},401:function(e,a,t){},402:function(e,a,t){},513:function(e,a,t){},514:function(e,a,t){"use strict";t.r(a);var n=t(6),r=t(0),l=t.n(r),s=t(39),i=t.n(s),c=t(21),o=t(22),u=t(24),d=t(23),b=(t(299),t(69)),m=t(41),h=t(26),j=t.n(h),p=t(38),v=t(145),f=t(521),O=t(291),g=t(286),x=t(40),y=t(531),S=t(532),w=(t(300),t.p+"static/media/logo.9328371b.png"),k=t(210),C=t.n(k);function N(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n,r){("GET"===t?C.a.get(e,{params:a}):C.a.post(e,a)).then((function(e){n(e)})).catch((function(e){O.b.error("Request error: "+e.message)}))}))}N("/login",{username:"WenlongLu",password:"0604"},"POST").then(),N("/management/user/add",{username:"WenlongLu",password:"0604",notes:"This is me"},"POST").then();var P=function(e,a){return N("/login",{username:e,password:a},"POST")},M=function(e){return N("/management/user/"+(e._id?"update":"add"),e,"POST")},A=function(e,a){return N("/management/member/list",{pageNum:e,pageSize:a})},T=function(e){return N("/management/member/search",{pageNum:e.pageNum,pageSize:e.pageSize,searchName:e.searchName,searchType:e.searchType})},E=function(e){return N("/management/member/image/delete",{name:e},"POST")},R=function(e){return N("/management/member/"+(e._id?"update":"add"),e,"POST")},F=function(e){return N("/management/member/delete",e,"POST")},I=function(e){return N("/management/role/add",{roleName:e},"POST")},B=function(e){return N("/management/role/update",e,"POST")},U=function(e){return N("/management/role/delete",e,"POST")},L=function(){return N("/management/user/list")},_=function(e){return N("/management/user/delete",{userId:e},"POST")},z=function(){return N("/calendar/events")},D=function(e){return N("/calendar/add",e,"POST")},V={user:{}},K=t(192),G=t.n(K),H="user_key",W=function(e){G.a.set(H,e)},q=function(){return G.a.get(H)||{}},J=function(){G.a.remove(H)},Y=function(){var e=Object(m.g)(),a=f.a.useForm(),t=Object(v.a)(a,1)[0],r=V.user;if(r&&r._id)return Object(n.jsx)(m.a,{to:"/"});return Object(n.jsxs)("div",{className:"login",children:[Object(n.jsxs)("header",{className:"login-header",children:[Object(n.jsx)("img",{src:w,alt:"logo"}),Object(n.jsx)("h1",{children:"RNG E-Sports Club"})]}),Object(n.jsxs)("section",{className:"login-content",children:[Object(n.jsx)("h2",{children:"Login"}),Object(n.jsxs)(f.a,{className:"login-form",onFinish:function(a){t.validateFields().then(function(){var a=Object(p.a)(j.a.mark((function a(t){var n,r,l,s,i;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.username,r=t.password,a.next=3,P(n,r);case 3:l=a.sent,0===(s=l.data).status?(O.b.success("Login successfully!"),i=s.data,V.user=i,W(i),e.replace("/")):O.b.error(s.msg);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},form:t,children:[Object(n.jsx)(f.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"},{min:4,message:"Username must be at least 4 characters!"},{max:12,message:"Username can be at most 12 characters!"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Username must consist of letters, numbers or underscores!"}],children:Object(n.jsx)(g.a,{prefix:Object(n.jsx)(y.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(n.jsx)(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{validator:function(e,a){return a?a.length<4?Promise.reject("Password cannot be less than 4 characters!"):a.length>12?Promise.reject("Password cannot be more than 12 characters!"):/^[a-zA-Z0-9_]+$/.test(a)?Promise.resolve():Promise.reject("Password must consist of letters, numbers or underscores!"):Promise.reject("Password must be entered!")}}],children:Object(n.jsx)(g.a,{prefix:Object(n.jsx)(S.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(n.jsx)(f.a.Item,{children:Object(n.jsx)(x.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})]})]})},Z=t(516),Q=t(113),$=(t(399),t(533)),X=t(534),ee=t(535),ae=t(292),te=[{title:"Homepage: Team",key:"homepage",icon:Object(n.jsx)($.a,{}),route:"/home",isPublic:!0},{title:"Calendar",key:"calendar",icon:Object(n.jsx)(X.a,{}),route:"/calendar"},{title:"Members",key:"member",icon:Object(n.jsx)(ee.a,{}),route:"/member"},{title:"Management",key:"management",icon:Object(n.jsx)(ae.a,{}),route:"/management",children:[{title:"Members Management",key:"member management",route:"/management/member"},{title:"User Management",key:"user management",route:"/management/user"},{title:"Role Management",key:"role management",route:"/management/role"}]}],ne=Q.a.SubMenu,re=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).hasAuth=function(e){var a=e.route,t=e.isPublic,n=V.user.role.menus;return!("admin"!==V.user.username&&!t&&-1===n.indexOf(a))||!!e.children&&!!e.children.find((function(e){return-1!==n.indexOf(e.route)}))},e.getMenuNodes=function(a){var t=e.props.location.pathname;return a.reduce((function(a,r){e.hasAuth(r)&&(r.children?(r.children.find((function(e){return 0===t.indexOf(e.route)}))&&(e.openKey=r.key),a.push(Object(n.jsx)(ne,{icon:r.icon,title:r.title,children:e.getMenuNodes(r.children)},r.key))):a.push(Object(n.jsx)(Q.a.Item,{icon:r.icon,children:Object(n.jsx)(b.b,{to:r.route,children:r.title})},r.key)));return a}),[])},e}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.menuNodes=this.getMenuNodes(te)}},{key:"render",value:function(){var e=this.props.location.pathname,a=this.openKey;return 0===e.indexOf("member")&&(e="/member"),Object(n.jsxs)("div",{className:"left-nav",children:[Object(n.jsx)(b.b,{to:"/",className:"left-nav-header",children:Object(n.jsx)("img",{src:w,alt:"logo"})}),Object(n.jsx)(Q.a,{defaultOpenKeys:[a],selectedKeys:[e],mode:"inline",theme:"dark",children:this.menuNodes})]})}}]),t}(r.Component),le=Object(m.h)(re),se=t(523),ie=t(110),ce=t(536);t(400);function oe(e){if(!e)return"";var a=new Date(e);return a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}var ue=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={currentTime:oe(Date.now())},e.getTime=function(){e.intervalId=setInterval((function(){var a=oe(Date.now());e.setState({currentTime:a})}),1e3)},e.getTitle=function(){var a,t=e.props.location.pathname;return te.forEach((function(e){if(e.route===t)a=e.title;else if(e.children){var n=e.children.find((function(e){return 0===t.indexOf(e.route)}));n&&(a=n.title)}})),a},e.logout=function(){se.a.confirm({title:"Do you want to logout?",icon:Object(n.jsx)(ie.a,{}),onOk:function(){J(),V.user={},e.props.history.replace("/login")}})},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getTime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state.currentTime,a=V.user.username,t=this.getTitle();return Object(n.jsxs)("div",{className:"header",children:[Object(n.jsxs)("div",{className:"header-top",children:[Object(n.jsxs)("span",{children:["Welcome, ",a]}),Object(n.jsx)(x.a,{className:"header-top-button",onClick:this.logout,icon:Object(n.jsx)(ce.a,{}),type:"link",children:"Logout"})]}),Object(n.jsxs)("div",{className:"header-bottom",children:[Object(n.jsx)("div",{className:"header-bottom-left",children:t}),Object(n.jsx)("div",{className:"header-bottom-right",children:Object(n.jsx)("span",{children:e})})]})]})}}]),t}(r.Component),de=Object(m.h)(ue),be=(t(401),function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"levels",children:[Object(n.jsxs)("div",{className:"level one",children:[Object(n.jsx)("div",{className:"title",children:"LPL Spring"}),Object(n.jsx)("div",{className:"content",children:"Best record: Champion"})]}),Object(n.jsxs)("div",{className:"level two",children:[Object(n.jsx)("div",{className:"title",children:"LPL Summer"}),Object(n.jsx)("div",{className:"content",children:"Best record: Champion"})]}),Object(n.jsxs)("div",{className:"level three",children:[Object(n.jsx)("div",{className:"title",children:"MSI"}),Object(n.jsx)("div",{className:"content",children:"Best record: Champion"})]}),Object(n.jsxs)("div",{className:"level four",children:[Object(n.jsx)("div",{className:"title",children:"World"}),Object(n.jsx)("div",{className:"content",children:"Best record: Runner-up"})]})]})})}}]),t}(r.Component)),me=t(525),he=t(526),je=t(527),pe=t(48),ve=t.n(pe),fe=t(45),Oe=t(537),ge=t(293),xe=(t(402),f.a.List),ye=f.a.Item,Se=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).formRef=l.a.createRef(),e}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.formRef)}},{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},a={wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:4}}};return Object(n.jsx)(f.a,Object(fe.a)(Object(fe.a)({ref:this.formRef},a),{},{children:Object(n.jsx)(xe,{name:"events",children:function(t,l,s){var i=l.add,c=l.remove,o=s.errors;return Object(n.jsxs)(n.Fragment,{children:[t.map((function(l,s){return Object(r.createElement)(ye,Object(fe.a)(Object(fe.a)({},0===s?e:a),{},{label:0===s?"Events":"",required:!1,key:l.key}),Object(n.jsx)(ye,Object(fe.a)(Object(fe.a)({},l),{},{validateTrigger:["onChange","onBlur"],rules:[{required:!0,whitespace:!0,message:"Please input the event or delete this field."}],noStyle:!0,children:Object(n.jsx)(g.a,{placeholder:"Event",style:{width:"60%"}})})),t.length>1?Object(n.jsx)(Oe.a,{className:"dynamic-delete-button",onClick:function(){return c(l.name)}}):null)})),Object(n.jsxs)(ye,{children:[Object(n.jsx)(x.a,{type:"dashed",onClick:function(){return i()},style:{width:"60%"},icon:Object(n.jsx)(ge.a,{}),children:"Add new event"}),Object(n.jsx)(f.a.ErrorList,{errors:o})]},"newEvent")]})}})}))}}]),t}(r.Component),we=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={value:ve()(oe(Date.now())),selectedValue:ve()(oe(Date.now())),isShownEventForm:!1,allEvents:[]},e.onSelect=function(a){e.setState({value:a,selectedValue:a})},e.onPanelChange=function(a){e.setState({value:a})},e.addEvent=function(){e.form.current.validateFields().then(function(){var a=Object(p.a)(j.a.mark((function a(t){var n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({isShownEventForm:!1}),e.form.current.resetFields(),n=t.events,r={date:e.state.selectedValue,eventList:n},a.next=6,D(r);case 6:0===a.sent.data.status?(O.b.success("Successfully added events!"),e.getEvents()):O.b.error("Failed to add events.");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},e.getEvents=Object(p.a)(j.a.mark((function a(){var t,n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z();case 2:0===(t=a.sent).data.status&&(n=t.data.data,e.setState({allEvents:n}));case 4:case"end":return a.stop()}}),a)}))),e}return Object(o.a)(t,[{key:"isAbleToEditCalendar",value:function(){return"admin"===V.user.username||V.user.role.menus.indexOf("/management")>-1}},{key:"UNSAFE_componentWillMount",value:function(){this.getEvents()}},{key:"render",value:function(){var e=this,a=this.state,t=a.value,r=a.selectedValue,l=a.isShownEventForm,s=a.allEvents;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(he.a,{message:"You selected date: ".concat(r&&r.format("YYYY/MM/DD"))}),Object(n.jsx)(x.a,{type:"primary",disabled:!this.isAbleToEditCalendar(),onClick:function(){return e.setState({isShownEventForm:!0})},children:"Edit Events"}),Object(n.jsx)(je.a,{dateCellRender:function(e){var a=function(e){var a=[];return s.map((function(t){if((e.year()!==t||ve()(oe(t.date)).year())&&e.month()===ve()(oe(t.date)).month()&&e.date()===ve()(oe(t.date)).date())for(var n=0;n<t.eventList.length;n++)a.push({content:t.eventList[n]});return a||[]})),a||[]}(e);return Object(n.jsx)("ul",{className:"events",children:a.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(me.a,{color:"#"+Math.random().toString(16).substr(2,6),text:e.content})},e.content)}))})},value:t,onSelect:this.onSelect,onPanelChange:this.onPanelChange}),Object(n.jsx)(se.a,{title:"Edit Event",visible:l,onOk:this.addEvent,onCancel:function(){e.setState({isShownEventForm:!1}),e.form.current.resetFields()},children:Object(n.jsx)(Se,{setForm:function(a){return e.form=a}})})]})}}]),t}(r.Component),ke=t(519),Ce=t(183),Ne="http://54.217.174.185:80/upload/",Pe=[{value:"Europe",label:"Europe",children:[{value:"Albania",label:"Albania"},{value:"Austria",label:"Austria"},{value:"Belarus",label:"Belarus"},{value:"Belgium",label:"Belgium"},{value:"Bosnia and Herzegovina",label:"Bosnia and Herzegovina"},{value:"Bulgaria",label:"Bulgaria"},{value:"Croatia",label:"Croatia"},{value:"Cyprus",label:"Cyprus"},{value:"Czech Republic",label:"Czech Republic"},{value:"Denmark",label:"Denmark"},{value:"Estonia",label:"Estonia"},{value:"Euro Area",label:"Euro Area"},{value:"European Union",label:"European Union"},{value:"Faroe Islands",label:"Faroe Islands"},{value:"Finland",label:"Finland"},{value:"France",label:"France"},{value:"Germany",label:"Germany"},{value:"Greece",label:"Greece"},{value:"Hungary",label:"Hungary"},{value:"Iceland",label:"Iceland"},{value:"Ireland",label:"Ireland"},{value:"Italy",label:"Italy"},{value:"Kosovo",label:"Kosovo"},{value:"Latvia",label:"Latvia"},{value:"Liechtenstein",label:"Liechtenstein"},{value:"Lithuania",label:"Lithuania"},{value:"Luxembourg",label:"Luxembourg"},{value:"Macedonia",label:"Macedonia"},{value:"Malta",label:"Malta"},{value:"Moldova",label:"Moldova"},{value:"Monaco",label:"Monaco"},{value:"Montenegro",label:"Montenegro"},{value:"Netherlands",label:"Netherlands"},{value:"Norway",label:"Norway"},{value:"Poland",label:"Poland"},{value:"Portugal",label:"Portugal"},{value:"Romania",label:"Romania"},{value:"Russia",label:"Russia"},{value:"Serbia",label:"Serbia"},{value:"Slovakia",label:"Slovakia"},{value:"Slovenia",label:"Slovenia"},{value:"Spain",label:"Spain"},{value:"Sweden",label:"Sweden"},{value:"Switzerland",label:"Switzerland"},{value:"Turkey",label:"Turkey"},{value:"Ukraine",label:"Ukraine"},{value:"United Kingdom",label:"United Kingdom"}]},{value:"America",label:"America",children:[{value:"Argentina",label:"Argentina"},{value:"Aruba",label:"Aruba"},{value:"Bahamas",label:"Bahamas"},{value:"Barbados",label:"Barbados"},{value:"Belize",label:"Belize"},{value:"Bolivia",label:"Bolivia"},{value:"Brazil",label:"Brazil"},{value:"Canada",label:"Canada"},{value:"Cayman Islands",label:"Cayman Islands"},{value:"Chile",label:"Chile"},{value:"Colombia",label:"Colombia"},{value:"Costa Rica",label:"Costa Rica"},{value:"Cuba",label:"Cuba"},{value:"Dominican Republic",label:"Dominican Republic"},{value:"Ecuador",label:"Ecuador"},{value:"El Salvador",label:"El Salvador"},{value:"Guatemala",label:"Guatemala"},{value:"Guyana",label:"Guyana"},{value:"Haiti",label:"Haiti"},{value:"Honduras",label:"Honduras"},{value:"Jamaica",label:"Jamaica"},{value:"Mexico",label:"Mexico"},{value:"Nicaragua",label:"Nicaragua"},{value:"Panama",label:"Panama"},{value:"Paraguay",label:"Paraguay"},{value:"Peru",label:"Peru"},{value:"Puerto Rico",label:"Puerto Rico"},{value:"Suriname",label:"Suriname"},{value:"Trinidad and Tobago",label:"Trinidad and Tobago"},{value:"United States",label:"United States"},{value:"Uruguay",label:"Uruguay"},{value:"Venezuela",label:"Venezuela"}]},{value:"Asia",label:"Asia",children:[{value:"Afghanistan",label:"Afghanistan"},{value:"Armenia",label:"Armenia"},{value:"Azerbaijan",label:"Azerbaijan"},{value:"Bahrain",label:"Bahrain"},{value:"Bangladesh",label:"Bangladesh"},{value:"Bhutan",label:"Bhutan"},{value:"Brunei",label:"Brunei"},{value:"Cambodia",label:"Cambodia"},{value:"China",label:"China"},{value:"East Timor",label:"East Timor"},{value:"Georgia",label:"Georgia"},{value:"Hong Kong",label:"Hong Kong"},{value:"India",label:"India"},{value:"Indonesia",label:"Indonesia"},{value:"Iran",label:"Iran"},{value:"Iraq",label:"Iraq"},{value:"Israel",label:"Israel"},{value:"Japan",label:"Japan"},{value:"Jordan",label:"Jordan"},{value:"Kazakhstan",label:"Kazakhstan"},{value:"Kuwait",label:"Kuwait"},{value:"Kyrgyzstan",label:"Kyrgyzstan"},{value:"Laos",label:"Laos"},{value:"Lebanon",label:"Lebanon"},{value:"Macau",label:"Macau"},{value:"Malaysia",label:"Malaysia"},{value:"Maldives",label:"Maldives"},{value:"Mongolia",label:"Mongolia"},{value:"Myanmar",label:"Myanmar"},{value:"Nepal",label:"Nepal"},{value:"North Korea",label:"North Korea"},{value:"Oman",label:"Oman"},{value:"Pakistan",label:"Pakistan"},{value:"Palestine",label:"Palestine"},{value:"Philippines",label:"Philippines"},{value:"Qatar",label:"Qatar"},{value:"Saudi Arabia",label:"Saudi Arabia"},{value:"Singapore",label:"Singapore"},{value:"South Korea",label:"South Korea"},{value:"Sri Lanka",label:"Sri Lanka"},{value:"Syria",label:"Syria"},{value:"Taiwan",label:"Taiwan"},{value:"Tajikistan",label:"Tajikistan"},{value:"Thailand",label:"Thailand"},{value:"Turkmenistan",label:"Turkmenistan"},{value:"United Arab Emirates",label:"United Arab Emirates"},{value:"Uzbekistan",label:"Uzbekistan"},{value:"Vietnam",label:"Vietnam"},{value:"Yemen",label:"Yemen"}]},{value:"Africa",label:"Africa",children:[{value:"Algeria",label:"Algeria"},{value:"Angola",label:"Angola"},{value:"Benin",label:"Benin"},{value:"Botswana",label:"Botswana"},{value:"Burkina Faso",label:"Burkina Faso"},{value:"Burundi",label:"Burundi"},{value:"Cameroon",label:"Cameroon"},{value:"Cape Verde",label:"Cape Verde"},{value:"Chad",label:"Chad"},{value:"Comoros",label:"Comoros"},{value:"Congo",label:"Congo"},{value:"Djibouti",label:"Djibouti"},{value:"Egypt",label:"Egypt"},{value:"Eritrea",label:"Eritrea"},{value:"Ethiopia",label:"Ethiopia"},{value:"Gambia",label:"Gambia"},{value:"Ghana",label:"Ghana"},{value:"Guinea",label:"Guinea"},{value:"Guinea Bissau",label:"Guinea Bissau"},{value:"Ivory Coast",label:"Ivory Coast"},{value:"Kenya",label:"Kenya"},{value:"Lesotho",label:"Lesotho"},{value:"Liberia",label:"Liberia"},{value:"Libya",label:"Libya"},{value:"Madagascar",label:"Madagascar"},{value:"Malawi",label:"Malawi"},{value:"Mali",label:"Mali"},{value:"Mauritania",label:"Mauritania"},{value:"Mauritius",label:"Mauritius"},{value:"Morocco",label:"Morocco"},{value:"Mozambique",label:"Mozambique"},{value:"Namibia",label:"Namibia"},{value:"Niger",label:"Niger"},{value:"Nigeria",label:"Nigeria"},{value:"Republic of the Congo",label:"Republic of the Congo"},{value:"Rwanda",label:"Rwanda"},{value:"Sao Tome and Principe",label:"Sao Tome and Principe"},{value:"Senegal",label:"Senegal"},{value:"Seychelles",label:"Seychelles"},{value:"Sierra Leone",label:"Sierra Leone"},{value:"Somalia",label:"Somalia"},{value:"South Africa",label:"South Africa"},{value:"South Sudan",label:"South Sudan"},{value:"Sudan",label:"Sudan"},{value:"Swaziland",label:"Swaziland"},{value:"Tanzania",label:"Tanzania"},{value:"Tunisia",label:"Tunisia"},{value:"Uganda",label:"Uganda"},{value:"Zambia",label:"Zambia"},{value:"Zimbabwe",label:"Zimbabwe"}]},{value:"Australia",label:"Australia",children:[{value:"Australia",label:"Australia"},{value:"Fiji",label:"Fiji"},{value:"New Caledonia",label:"New Caledonia"},{value:"New Zealand",label:"New Zealand"},{value:"Papua New Guinea",label:"Papua New Guinea"}]}],Me=ke.a.Meta,Ae=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={total:0,members:[]},n.getMembers=function(){var e=Object(p.a)(j.a.mark((function e(a){var t,r,l,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pageNum=a,n.setState({loading:!0}),e.next=4,A(a,3);case 4:t=e.sent,n.setState({loading:!1}),0===t.data.status&&(r=t.data.data,l=r.total,s=r.list,n.setState({total:l,members:s}));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={minValue:0,maxValue:3},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getMembers(1)}},{key:"render",value:function(){var e=this,a=this.state,t=a.members,r=a.total;return Object(n.jsxs)(n.Fragment,{children:[t&&r>0&&t.slice(this.state.minValue,this.state.maxValue).map((function(a){return Object(n.jsx)(ke.a,{hoverable:!0,style:{width:240},cover:Object(n.jsx)("img",{alt:"img",src:Ne+a.photo[0]}),onClick:function(){return e.props.history.push("/member/details",{member:a})},children:Object(n.jsx)(Me,{title:a.name})})})),Object(n.jsx)(Ce.a,{defaultCurrent:1,defaultPageSize:3,onChange:this.getMembers,total:r})]})}}]),t}(r.Component),Te=t(538),Ee=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this,a=this.props.location.state.member.details,t=Object(n.jsxs)("span",{children:[Object(n.jsx)(x.a,{type:"link",icon:Object(n.jsx)(Te.a,{style:{color:"#B49169",marginRight:5,fontSize:20}}),onClick:function(){return e.props.history.goBack()}}),Object(n.jsx)("span",{children:"Member details"})]});return Object(n.jsx)(ke.a,{title:t,children:Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})})}}]),t}(r.Component),Re=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{exact:!0,path:"/member",component:Ae}),Object(n.jsx)(m.b,{path:"/member/details",component:Ee}),Object(n.jsx)(m.a,{to:"/member"})]})}}]),t}(r.Component),Fe=t(98),Ie=t(528),Be=t(529),Ue=t(517),Le=t(187),_e=Fe.a.Option,ze=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={total:0,members:[],loading:!1,searchName:"",searchType:"memberName"},e.initColumns=function(){e.columns=[{title:"Name",dataIndex:"name"},{title:"Nickname",dataIndex:"nickname"},{title:"Position",dataIndex:"position"},{width:200,align:"center",title:"Action",render:function(a){return Object(n.jsxs)(Ie.b,{children:[Object(n.jsx)(x.a,{type:"link",onClick:function(){return e.props.history.push("/management/member/details",{member:a})},children:"Details"}),Object(n.jsx)(x.a,{type:"link",onClick:function(){return a?e.props.history.push("/management/member/operations?member="+JSON.stringify(a)):e.props.history.push("/management/member/operations")},children:"Edit"}),Object(n.jsx)(Be.a,{title:"Are you sure to delete this member?",onConfirm:Object(p.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(a);case 2:0===t.sent.data.status?O.b.success("Successfully deleted the member!"):O.b.error("Failed to delete the member."),e.getMembers(1);case 5:case"end":return t.stop()}}),t)}))),okText:"Yes",cancelText:"No",children:Object(n.jsx)(x.a,{type:"link",style:{color:"red"},children:"Delete"})})]})}}]},e.getMembers=function(){var a=Object(p.a)(j.a.mark((function a(t){var n,r,l,s,i,c,o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.pageNum=t,e.setState({loading:!0}),n=e.state,r=n.searchName,l=n.searchType,!r){a.next=9;break}return a.next=6,T({pageNum:t,pageSize:3,searchName:r,searchType:l});case 6:s=a.sent,a.next=12;break;case 9:return a.next=11,A(t,3);case 11:s=a.sent;case 12:e.setState({loading:!1}),0===s.data.status&&(i=s.data.data,c=i.total,o=i.list,e.setState({total:c,members:o}));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getMembers(1)}},{key:"render",value:function(){var e=this,a=this.state,t=a.members,r=a.total,l=a.loading,s=a.searchName,i=a.searchType,c=Object(n.jsxs)("span",{children:[Object(n.jsxs)(Fe.a,{value:i,style:{width:200},onChange:function(a){return e.setState({searchType:a})},children:[Object(n.jsx)(_e,{value:"memberName",children:"Search by Name"}),Object(n.jsx)(_e,{value:"memberNickname",children:"Search by Nickname"}),Object(n.jsx)(_e,{value:"memberPosition",children:"Search by Postion"})]}),Object(n.jsx)(g.a,{placeholder:"keyword",prefix:Object(n.jsx)(Le.a,{}),style:{width:100,margin:"0 10px"},value:s,onChange:function(a){return e.setState({searchName:a.target.value})}}),Object(n.jsx)(x.a,{type:"primary",onClick:function(){return e.getMembers(1)},children:"Search"})]}),o=Object(n.jsx)(x.a,{type:"primary",icon:Object(n.jsx)(ge.a,{}),onClick:function(){return e.props.history.push("/management/member/operations")},children:"New Member"});return Object(n.jsx)(ke.a,{title:c,extra:o,children:Object(n.jsx)(Ue.a,{columns:this.columns,dataSource:t,rowKey:"_id",bordered:!0,pagination:{current:this.pageNum,defaultPageSize:3,showQuickJumper:!0,total:r,onChange:this.getMembers},loading:l})})}}]),t}(r.Component),De=t(140),Ve=t(522),Ke=t(524),Ge=t(518);function He(e){return new Promise((function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return a(n.result)},n.onerror=function(e){return t(e)}}))}var We=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).state={previewVisible:!1,previewImage:"",previewTitle:"",fileList:[]},n.getImages=function(){return n.state.fileList.map((function(e){return e.name}))},n.handleCancel=function(){return n.setState({previewVisible:!1})},n.handlePreview=function(){var e=Object(p.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.url||a.preview){e.next=4;break}return e.next=3,He(a.originFileObj);case 3:a.preview=e.sent;case 4:n.setState({previewImage:a.url||a.preview,previewVisible:!0,previewTitle:a.name||a.url.substring(a.url.lastIndexOf("/")+1)});case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(p.a)(j.a.mark((function e(a){var t,r,l,s,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.file,r=a.fileList,"done"!==t.status){e.next=6;break}0===(l=t.response).status?(O.b.success("Successfully uploaded the image!"),s=l.data,i=s.name,c=s.url,(t=r[r.length-1]).name=i,t.url=c):O.b.error("Failed to upload image."),e.next=11;break;case 6:if("removed"!==t.status){e.next=11;break}return e.next=9,E(t.name);case 9:0===e.sent.data.status?O.b.success("Successfully deleted the image!"):O.b.error("Failed to detele the image.");case 11:n.setState({fileList:r});case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();var r=[],l=n.props.photo;return l&&l.length>0&&(r=l.map((function(e,a){return{uid:-a,name:e,status:"done",url:Ne+e}}))),n.state={previewVisible:!1,previewImage:"",fileList:r},n}return Object(o.a)(t,[{key:"render",value:function(){var e=this.state,a=e.previewVisible,t=e.previewImage,r=e.fileList,l=e.previewTitle,s=Object(n.jsxs)("div",{children:[Object(n.jsx)(ge.a,{}),Object(n.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ge.a,{action:"/management/member/image/upload",accept:"image/*",name:"image",listType:"picture-card",fileList:r,onPreview:this.handlePreview,onChange:this.handleChange,children:r.length>=8?null:s}),Object(n.jsx)(se.a,{visible:a,title:l,footer:null,onCancel:this.handleCancel,children:Object(n.jsx)("img",{alt:"example",style:{width:"100%"},src:t})})]})}}]),t}(l.a.Component);var qe=t(97),Je=t(281),Ye=t(282),Ze=t.n(Ye),Qe=t(283),$e=t.n(Qe),Xe=(t(512),function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(c.a)(this,t),(n=a.call(this,e)).state={editorState:qe.EditorState.createEmpty()},n.onEditorStateChange=function(e){n.setState({editorState:e})},n.getDetails=function(){return Ze()(Object(qe.convertToRaw)(n.state.editorState.getCurrentContent()))},n.uploadImageCallBack=function(e){return new Promise((function(a,t){var n=new XMLHttpRequest;n.open("POST","/management/member/image/upload");var r=new FormData;r.append("image",e),n.send(r),n.addEventListener("load",(function(){var e=JSON.parse(n.responseText).data.url;a({data:{link:e}})})),n.addEventListener("error",(function(){var e=JSON.parse(n.responseText);t(e)}))}))};var r=n.props.details;if(r){var l=$e()(r),s=qe.ContentState.createFromBlockArray(l.contentBlocks),i=qe.EditorState.createWithContent(s);n.state={editorState:i}}else n.state={editorState:qe.EditorState.createEmpty()};return n}return Object(o.a)(t,[{key:"render",value:function(){var e=this.state.editorState;return Object(n.jsx)(Je.Editor,{editorState:e,editorStyle:{border:"1px solid black",minHeight:200,paddingLeft:10},onEditorStateChange:this.onEditorStateChange,toolbar:{image:{uploadCallback:this.uploadImageCallBack,alt:{present:!0,mandatory:!0}}}})}}]),t}(r.Component)),ea=f.a.Item,aa=function(){var e=Pe;var a=Object(m.g)(),t=f.a.useForm(),s=Object(v.a)(t,1)[0],i=l.a.useState(1),c=Object(v.a)(i,2),o=c[0],u=c[1],d=Object(r.useRef)();d.current||(d.current=o);var b=Object(r.useRef)();b.current||(b.current=o);var h,y,S=function(e){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(a);return null!=t?unescape(t[2]):null}("member"),w=!!S;w?(h=JSON.parse(S),y=h._id):h={};var k=h.photo,C=h.details,N=Object(n.jsxs)("span",{children:[Object(n.jsx)(x.a,{type:"link",icon:Object(n.jsx)(Te.a,{style:{color:"#B49169",marginRight:5,fontSize:20}}),onClick:function(){return a.goBack()}}),Object(n.jsx)("span",{children:w?"Edit Member":"Add New Member"})]});return Object(n.jsx)(ke.a,{title:N,children:Object(n.jsxs)(f.a,Object(fe.a)(Object(fe.a)({},{labelCol:{span:3},wrapperCol:{span:8}}),{},{onFinish:function(e){s.validateFields().then(function(){var e=Object(p.a)(j.a.mark((function e(t){var n,r,l,s,i,c,o,u,m,h,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.nickname,l=t.position,s=t.gender,i=t.nationality,c=t.phone,o=t.address,u=t.dob,u=ve()(u).format("YYYY-MM-DD"),m=d.current.getImages(),h=b.current.getDetails(),p={name:n,nickname:r,position:l,gender:s,dob:u,nationality:i,phone:c,address:o,photo:m,details:h},w&&(p._id=y),e.next=9,R(p);case 9:0===e.sent.data.status?(O.b.success("Successfully ".concat(w?"updated":"added"," the member!")),a.goBack()):O.b.error("Failed to ".concat(w?"update":"add"," the member."));case 11:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},form:s,children:[Object(n.jsx)(ea,{label:"Name",initialValue:h.name,name:"name",rules:[{required:!0,message:"Name must be entered!"}],children:Object(n.jsx)(g.a,{placeholder:"Please input the name"})}),Object(n.jsx)(ea,{label:"Nickname",initialValue:h.nickname,name:"nickname",rules:[{required:!0,message:"Nickname must be entered!"}],children:Object(n.jsx)(g.a,{placeholder:"Please input the niclkname"})}),Object(n.jsx)(ea,{label:"Position",initialValue:h.position,name:"position",rules:[{required:!0,message:"Position must be entered!"}],children:Object(n.jsx)(g.a,{placeholder:"Please input the position"})}),Object(n.jsx)(ea,{label:"Gender",initialValue:h.gender,name:"gender",children:Object(n.jsxs)(De.a.Group,{name:"radiogroup",onChange:function(e){u(e.target.value)},value:o,children:[Object(n.jsx)(De.a,{value:"Male",children:"Male"}),Object(n.jsx)(De.a,{value:"Female",children:"Female"}),Object(n.jsx)(De.a,{value:"Intersex",children:"Intersex"})]})}),Object(n.jsx)(ea,{label:"DoB",initialValue:ve()(h.dob),name:"dob",children:Object(n.jsx)(Ve.a,{})}),Object(n.jsx)(ea,{label:"Nationality",initialValue:h.nationality,name:"nationality",children:Object(n.jsx)(Ke.a,{options:e,placeholder:"Please select the nationality.",expandTrigger:"hover",displayRender:function(e){return e[e.length-1]}})}),Object(n.jsx)(ea,{label:"Phone No.",initialValue:h.phone,name:"phone",children:Object(n.jsx)(g.a,{placeholder:"Please input the phone number"})}),Object(n.jsx)(ea,{label:"Address",initialValue:h.address,name:"address",children:Object(n.jsx)(g.a,{placeholder:"Please input the address"})}),Object(n.jsx)(ea,{label:"Photo",children:Object(n.jsx)(We,{ref:d,photo:k})}),Object(n.jsx)(ea,{label:"Details",labelCol:{span:3},wrapperCol:{span:20},children:Object(n.jsx)(Xe,{ref:b,details:C})}),Object(n.jsx)(ea,{children:Object(n.jsx)(x.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})},ta=t(530),na=ta.b.Item,ra=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this,a=this.props.location.state.member,t=a.name,r=a.nickname,l=a.position,s=a.gender,i=a.dob,c=a.nationality,o=void 0===c?[]:c,u=a.phone,d=a.address,b=a.photo,m=void 0===b?[]:b,h=a.details,j=Object(n.jsxs)("span",{children:[Object(n.jsx)(x.a,{type:"link",icon:Object(n.jsx)(Te.a,{style:{color:"#B49169",marginRight:5,fontSize:20}}),onClick:function(){return e.props.history.goBack()}}),Object(n.jsx)("span",{children:"Member details"})]});return Object(n.jsx)(ke.a,{title:j,className:"member-details",children:Object(n.jsxs)(ta.b,{children:[Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Name:"}),Object(n.jsx)("span",{children:t})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Nickname:"}),Object(n.jsx)("span",{children:r})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Position:"}),Object(n.jsx)("span",{children:l})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Gender:"}),Object(n.jsx)("span",{children:s})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"DoB:"}),Object(n.jsx)("span",{children:i})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Nationality:"}),Object(n.jsx)("span",{children:o.slice(-1)})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Phone No.:"}),Object(n.jsx)("span",{children:u})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Address:"}),Object(n.jsx)("span",{children:d})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Photo:"}),Object(n.jsx)("span",{children:m.map((function(e){return Object(n.jsx)("img",{className:"member-image",src:Ne+e,alt:"img"},e)}))})]}),Object(n.jsxs)(na,{children:[Object(n.jsx)("span",{className:"left",children:"Details:"}),Object(n.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})]})]})})}}]),t}(r.Component),la=(t(513),function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{exact:!0,path:"/management/member",component:ze}),Object(n.jsx)(m.b,{path:"/management/member/operations",component:aa}),Object(n.jsx)(m.b,{path:"/management/member/details",component:ra}),Object(n.jsx)(m.a,{to:"/management/member"})]})}}]),t}(r.Component)),sa=t(215),ia=f.a.Item,ca=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).formRef=l.a.createRef(),e}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.formRef)}},{key:"render",value:function(){return Object(n.jsx)(f.a,{ref:this.formRef,children:Object(n.jsx)(ia,Object(fe.a)(Object(fe.a)({label:"Role Name",name:"roleName"},{labelCol:{span:4},wrapperCol:{span:15}}),{},{initialValue:"",rules:[{required:!0,message:"Role name must be entered!"}],children:Object(n.jsx)(g.a,{placeholder:"Please input the role name."})}))})}}]),t}(r.Component),oa=t(520),ua=f.a.Item,da=oa.a.TreeNode,ba=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var r;Object(c.a)(this,t),(r=a.call(this,e)).formRef=l.a.createRef(),r.getMenus=function(){return r.state.checkedKeys},r.getTreeNodes=function(e){return e.reduce((function(e,a){return e.push(Object(n.jsx)(da,{title:a.title,children:a.children?r.getTreeNodes(a.children):null},a.route)),e}),[])},r.onCheck=function(e){console.log("onCheck",e),r.setState({checkedKeys:e})};var s=r.props.role.menus;return r.state={checkedKeys:s},r}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.treeNodes=this.getTreeNodes(te)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var a=e.role.menus;this.setState({checkedKeys:a})}},{key:"render",value:function(){var e=this.props.role,a=this.state.checkedKeys;return Object(n.jsxs)(f.a,{children:[Object(n.jsx)(ua,Object(fe.a)(Object(fe.a)({label:"Role Name"},{labelCol:{span:4},wrapperCol:{span:15}}),{},{children:Object(n.jsx)(g.a,{value:e.name,disabled:!0})})),Object(n.jsx)(oa.a,{checkable:!0,defaultExpandAll:!0,checkedKeys:a,onCheck:this.onCheck,children:Object(n.jsx)(da,{title:"System Permissions",children:this.treeNodes},"0-0")})]})}}]),t}(r.Component),ma=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={roles:[],role:{},isShownAdd:!1,isShownAuth:!1,loading:!1},n.initColumn=function(){n.columns=[{title:"Role Name",dataIndex:"name"},{title:"Create Time",dataIndex:"create_time",render:oe},{title:"Authorization Time",dataIndex:"auth_time",render:oe},{title:"Operator",dataIndex:"auth_name"}]},n.getRoles=Object(p.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.next=3,N("/management/role/list");case 3:a=e.sent,n.setState({loading:!1}),0===a.data.status&&(t=a.data.data,n.setState({roles:t}));case 6:case"end":return e.stop()}}),e)}))),n.onRow=function(e){return{onClick:function(a){n.setState({role:e})}}},n.addRole=function(){n.form.current.validateFields().then(function(){var e=Object(p.a)(j.a.mark((function e(a){var t,r,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isShownAdd:!1}),t=a.roleName,n.form.current.resetFields(),e.next=5,I(t);case 5:0===(r=e.sent).data.status?(O.b.success("Successfully added the role!"),n.getRoles(),l=r.data.data,n.setState((function(e){return{roles:[].concat(Object(sa.a)(e.roles),[l])}}))):O.b.error("Failed to add new role");case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch()},n.setRolePermissons=Object(p.a)(j.a.mark((function e(){var a,t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isShownAuth:!1}),a=n.state.role,t=n.auth.current.getMenus(),a.menus=t,a.auth_time=Date.now(),a.auth_name=V.user.username,e.next=8,B(a);case 8:0===e.sent.data.status?a._id===V.user.role_id?(V.user={},J(),n.props.history.replace("/login"),O.b.info("The permissions of current user has changed. Please login again.")):(O.b.success("Successfully set the role permissions!"),n.setState({role:Object(sa.a)(n.state.roles)})):O.b.error("Failed to set the role permissions.");case 10:case"end":return e.stop()}}),e)}))),n.auth=l.a.createRef(),n}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumn()}},{key:"componentDidMount",value:function(){this.getRoles()}},{key:"render",value:function(){var e=this,a=this.state,t=a.roles,r=a.role,l=a.isShownAdd,s=a.isShownAuth,i=a.loading,c=Object(n.jsxs)("span",{children:[Object(n.jsx)(x.a,{type:"primary",onClick:function(){return e.setState({isShownAdd:!0})},children:"Create Role"})," \xa0\xa0",Object(n.jsx)(x.a,{type:"primary",disabled:!r._id,onClick:function(){return e.setState({isShownAuth:!0})},children:"Set Role Permissons"}),"\xa0\xa0",Object(n.jsx)(Be.a,{title:"Are you sure to delete this role?",onConfirm:Object(p.a)(j.a.mark((function a(){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,U(r);case 2:0===a.sent.data.status?O.b.success("Successfully deleted the role!"):O.b.error("Failed to delete the role."),e.getRoles();case 5:case"end":return a.stop()}}),a)}))),okText:"Yes",cancelText:"No",children:Object(n.jsx)(x.a,{type:"danger",disabled:!r._id,children:"Delete"})})]});return Object(n.jsxs)(ke.a,{title:c,children:[Object(n.jsx)(Ue.a,{columns:this.columns,rowKey:"_id",bordered:!0,pagination:{defaultPageSize:3,showQuickJumper:!0},dataSource:t,rowSelection:{type:"radio",selectedRowKeys:[r._id],onSelect:function(a){e.setState({role:a})}},onRow:this.onRow,loading:i}),Object(n.jsx)(se.a,{title:"Add New Role",visible:l,onOk:this.addRole,onCancel:function(){e.setState({isShownAdd:!1}),e.form.current.resetFields()},children:Object(n.jsx)(ca,{setForm:function(a){return e.form=a}})}),Object(n.jsx)(se.a,{title:"Set Role Permissions",visible:s,onOk:this.setRolePermissons,onCancel:function(){e.setState({isShownAuth:!1})},children:Object(n.jsx)(ba,{role:r,ref:this.auth})})]})}}]),t}(r.Component),ha=f.a.Item,ja=Fe.a.Option,pa=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).formRef=l.a.createRef(),e}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setForm(this.formRef)}},{key:"render",value:function(){var e=this.props,a=e.roles,t=e.user;return Object(n.jsxs)(f.a,Object(fe.a)(Object(fe.a)({ref:this.formRef},{labelCol:{span:4},wrapperCol:{span:15}}),{},{children:[Object(n.jsx)(ha,{label:"Username",name:"username",initialValue:t.username,rules:[{required:!0,message:"Username must be entered!"}],children:Object(n.jsx)(g.a,{placeholder:"Please input the username."})}),t._id?null:Object(n.jsx)(ha,{label:"Password",name:"password",initialValue:t.password,rules:[{required:!0,message:"Password must be entered!"}],children:Object(n.jsx)(g.a,{type:"password",placeholder:"Please input the password."})}),Object(n.jsx)(ha,{label:"Role",name:"role_id",initialValue:t.role_id,children:Object(n.jsx)(Fe.a,{children:a.map((function(e){return Object(n.jsx)(ja,{children:e.name},e._id)}))})}),Object(n.jsx)(ha,{label:"Notes",name:"notes",initialValue:t.notes,children:Object(n.jsx)(g.a,{placeholder:"Please input the notes."})})]}))}}]),t}(r.PureComponent),va=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(e=a.call.apply(a,[this].concat(l))).state={users:[],roles:[],isShown:!1,loading:!1},e.initColumns=function(){e.columns=[{title:"Username",dataIndex:"username"},{title:"Register Time",dataIndex:"create_time",render:oe},{title:"Role",dataIndex:"role_id",render:function(a){return e.roleNames[a]}},{title:"Notes",dataIndex:"notes"},{title:"Action",render:function(a){return Object(n.jsxs)("span",{children:[Object(n.jsx)(x.a,{type:"link",onClick:function(){e.user=a,e.setState({isShown:!0})},children:"Edit"}),Object(n.jsx)(x.a,{type:"link",style:{color:"red"},onClick:function(){return e.deleteUser(a)},children:"Delete"})]})}}]},e.initRoleNames=function(a){var t=a.reduce((function(e,a){return e[a._id]=a.name,e}),{});e.roleNames=t},e.addOrUpdateUser=Object(p.a)(j.a.mark((function a(){var t;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({isShown:!1}),t=e.form.current.getFieldsValue(),e.form.current.resetFields(),e.user&&(t._id=e.user._id),a.next=6,M(t);case 6:0===a.sent.data.status?(O.b.success("Successfully ".concat(e.user?"updated":"added"," the user!")),e.getUsers()):O.b.error("Failed to add the user.");case 8:case"end":return a.stop()}}),a)}))),e.getUsers=Object(p.a)(j.a.mark((function a(){var t,n,r,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({loading:!0}),a.next=3,L();case 3:t=a.sent,e.setState({loading:!1}),0===t.data.status&&(n=t.data.data,r=n.users,l=n.roles,e.initRoleNames(l),e.setState({users:r,roles:l}));case 6:case"end":return a.stop()}}),a)}))),e.deleteUser=function(a){se.a.confirm({title:"Are you sure to delete ".concat(a.username,"?"),onOk:function(){var t=Object(p.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(a._id);case 2:0===t.sent.data.status?(O.b.success("Successfully deleted the user!"),e.getUsers()):O.b.error("Failed to delete the user");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},e}return Object(o.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,a=this.state,t=a.users,r=a.roles,l=a.isShown,s=a.loading,i=this.user||{},c=Object(n.jsx)(x.a,{type:"primary",onClick:function(){e.user=null,e.setState({isShown:!0})},children:"Create User"});return Object(n.jsxs)(ke.a,{title:c,children:[Object(n.jsx)(Ue.a,{columns:this.columns,rowKey:"_id",bordered:!0,pagination:{defaultPageSize:3,showQuickJumper:!0},dataSource:t,loading:s}),Object(n.jsx)(se.a,{title:i._id?"Update User":"Create User",visible:l,onOk:this.addOrUpdateUser,onCancel:function(){e.form.current.resetFields(),e.setState({isShown:!1}),e.user=null},destroyOnClose:!0,children:Object(n.jsx)(pa,{setForm:function(a){return e.form=a},roles:r,user:i})})]})}}]),t}(r.Component),fa=Z.a.Footer,Oa=Z.a.Sider,ga=Z.a.Content,xa=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=V.user;return e&&e._id?Object(n.jsxs)(Z.a,{style:{minHeight:"100%"},children:[Object(n.jsx)(Oa,{style:{zIndex:9999},children:Object(n.jsx)(le,{})}),Object(n.jsxs)(Z.a,{style:{minWidth:1e3},children:[Object(n.jsx)(de,{children:"Header"}),Object(n.jsx)(ga,{style:{margin:20,backgroundColor:"#ffffff"},children:Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{path:"/home",component:be}),Object(n.jsx)(m.b,{path:"/calendar",component:we}),Object(n.jsx)(m.b,{path:"/member",component:Re}),Object(n.jsx)(m.b,{path:"/management/member",component:la}),Object(n.jsx)(m.b,{path:"/management/user",component:va}),Object(n.jsx)(m.b,{path:"/management/role",component:ma}),Object(n.jsx)(m.a,{to:"/home"})]})}),Object(n.jsx)(fa,{style:{textAlign:"center"},children:"Royal Never Give Up"})]})]}):Object(n.jsx)(m.a,{to:"/login"})}}]),t}(r.Component),ya=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){return Object(c.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsx)(b.a,{children:Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{path:"/login",component:Y}),Object(n.jsx)(m.b,{path:"/",component:xa})]})})}}]),t}(r.Component),Sa=q();V.user=Sa,i.a.render(Object(n.jsx)(ya,{}),document.getElementById("root"))}},[[514,1,2]]]);
//# sourceMappingURL=main.a17824cc.chunk.js.map